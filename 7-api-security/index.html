<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Test Demo - Playwright MCP</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        input, button {
            padding: 10px;
            margin: 5px 0;
            width: 100%;
            box-sizing: border-box;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffc107;
        }
    </style>
    
    <!-- PRIVACY ISSUE: Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA-XXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA-XXXXX');
    </script>
    
    <!-- PRIVACY ISSUE: Facebook Pixel -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '1234567890');
        fbq('track', 'PageView');
    </script>
</head>
<body>
    <h1>üîí Security & Privacy Test Site</h1>
    <p class="warning">‚ö†Ô∏è This page intentionally contains security and privacy issues for testing purposes.</p>

    <div class="card">
        <h2>Login Form (Unencrypted API)</h2>
        <form id="loginForm">
            <input type="email" id="email" placeholder="Email" value="user@example.com">
            <input type="password" id="password" placeholder="Password" value="MySecretPassword123">
            <input type="text" id="ssn" placeholder="SSN (Last 4 digits)" value="1234">
            <button type="submit">Login (Sends over HTTP!)</button>
        </form>
        <div id="loginStatus" class="status"></div>
    </div>

    <div class="card">
        <h2>Payment Form (Sensitive Data)</h2>
        <form id="paymentForm">
            <input type="text" id="cardNumber" placeholder="Card Number" value="4532-1234-5678-9010">
            <input type="text" id="cvv" placeholder="CVV" value="123">
            <input type="text" id="cardName" placeholder="Cardholder Name" value="John Doe">
            <button type="submit">Process Payment (Insecure!)</button>
        </form>
        <div id="paymentStatus" class="status"></div>
    </div>

    <div class="card">
        <h2>API Test Buttons</h2>
        <button onclick="testInsecureAPI()">Test HTTP API (Unencrypted)</button>
        <button onclick="testSecureAPI()">Test HTTPS API (Encrypted)</button>
        <button onclick="sendSensitiveData()">Send Sensitive Data</button>
        <div id="apiStatus" class="status"></div>
    </div>

    <script>
        // SECURITY ISSUE: Sensitive data in localStorage
        localStorage.setItem('userToken', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.sensitive_data');
        localStorage.setItem('creditCard', '4532123456789010');
        localStorage.setItem('apiKey', 'sk_live_secret_key_12345');

        // SECURITY ISSUE: Sensitive data in cookies
        document.cookie = "sessionToken=abc123xyz789; path=/";
        document.cookie = "userSSN=123-45-6789; path=/";

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const ssn = document.getElementById('ssn').value;

            // SECURITY ISSUE: Sending credentials over HTTP
            try {
                const response = await fetch('http://insecure-api.example.com/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password, ssn })
                });
                document.getElementById('loginStatus').innerHTML = 
                    '‚ö†Ô∏è Login attempted over unencrypted HTTP connection!';
            } catch (error) {
                document.getElementById('loginStatus').innerHTML = 
                    '‚ö†Ô∏è Request failed (expected - domain doesn\'t exist)';
            }
        });

        // Payment form submission
        document.getElementById('paymentForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const cardNumber = document.getElementById('cardNumber').value;
            const cvv = document.getElementById('cvv').value;
            
            // SECURITY ISSUE: Sending payment data over HTTP
            try {
                const response = await fetch('http://payment.example.com/charge', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ cardNumber, cvv })
                });
                document.getElementById('paymentStatus').innerHTML = 
                    '‚ö†Ô∏è Payment data sent over HTTP (INSECURE!)';
            } catch (error) {
                document.getElementById('paymentStatus').innerHTML = 
                    '‚ö†Ô∏è Payment request failed (expected)';
            }
        });

        // Test insecure API
        async function testInsecureAPI() {
            document.getElementById('apiStatus').innerHTML = 'Testing HTTP API...';
            try {
                // SECURITY ISSUE: HTTP instead of HTTPS
                await fetch('http://api.example.com/data', {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer secret_token_12345',
                        'X-API-Key': 'sk_live_api_key'
                    }
                });
            } catch (error) {
                document.getElementById('apiStatus').innerHTML = 
                    '‚ö†Ô∏è Unencrypted HTTP API call detected!';
            }
        }

        // Test secure API
        async function testSecureAPI() {
            document.getElementById('apiStatus').innerHTML = 'Testing HTTPS API...';
            try {
                // GOOD: Using HTTPS
                await fetch('https://jsonplaceholder.typicode.com/posts/1', {
                    method: 'GET'
                });
                document.getElementById('apiStatus').innerHTML = 
                    '‚úÖ Encrypted HTTPS API call';
            } catch (error) {
                document.getElementById('apiStatus').innerHTML = 
                    'Error: ' + error.message;
            }
        }

        // Send sensitive data
        async function sendSensitiveData() {
            document.getElementById('apiStatus').innerHTML = 'Sending sensitive data...';
            
            // SECURITY ISSUE: Sending PII over unencrypted connection
            const sensitiveData = {
                email: 'user@example.com',
                ssn: '123-45-6789',
                creditCard: '4532-1234-5678-9010',
                password: 'MySecretPassword123',
                apiKey: 'sk_live_secret_key_12345'
            };

            try {
                await fetch('http://tracking.example.com/collect', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(sensitiveData)
                });
            } catch (error) {
                document.getElementById('apiStatus').innerHTML = 
                    '‚ö†Ô∏è Sensitive data transmitted over HTTP!';
            }
        }

        // PRIVACY ISSUE: Track user behavior
        window.addEventListener('click', function(e) {
            // Send tracking data to analytics
            if (typeof gtag !== 'undefined') {
                gtag('event', 'click', {
                    'element': e.target.tagName,
                    'page_location': window.location.href
                });
            }
        });

        // Log when page loads
        console.log('Page loaded with tracking scripts');
        console.log('LocalStorage contains:', Object.keys(localStorage));
        console.log('Cookies:', document.cookie);
    </script>
</body>
</html>
